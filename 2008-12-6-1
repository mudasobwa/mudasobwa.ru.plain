Pssst! — Personal Snobbish Spam Stopper over Trackback

Я  уже говорил (http://mudasobwa.ru/post/show/1163)  , что нашел самый действенный способ защиты от спама в комментариях — принимать только trackback-комментарии. На самом деле, конечно, это не я придумал, а  Dave Winer (http://www.scripting.com/2007/01/01.html#theUneditedVoiceOfAPerson)  , а я лишь прочитал отзыв и мысли по поводу у  Joel Spolky (http://www.joelonsoftware.com/items/2007/07/20.html)  . В общем, не Абрамян, а Амбарцумян; не тыщу, а сто; не в лотерею, а в преферанс, и не выиграл — а проиграл. Но это не важно. Главное, что бессмысленные плюсадинеры перестают донимать, сцеживаются лишь самые сливки — то, что комментатору не стыдно написать _в своем блоге_.

Описанный способ хорош всем; единственный его недостаток заключается в том, что спам-роботы очень любят trackback. Поэтому приходится отключать и _отображение_ комментариев. Что, во-первых, не совсем этично по отношению к комментаторам, а во-вторых девальвирует саму первоначальную идею. Это уже борьба не со спамом получается, а с комментаторами. Лечение перхоти посредством усекновения головы.

Поскольку вчера мне уже недвусмысленно  намекнули (http://makishvili.com/2008/12/trackback/#comment-26)   на то, что я кхм... совсем омизантропел — пришлось срочно что-то придумывать.

Решение получилось гениальным, как все простое (надеюсь, я не перепутал порядок слов в этой идиоме; никак не могу его запомнить).

Комментарии включены, но форма оставления комментария отключена; только trackback. Каждый оставленный trackback попадает в «премодерацию» и не показывается до тех пор, пока его не пропустит модератор. Вот тут я все время спотыкался, потому что очень уж неохота отсматривать и модерировать весь спам самому. Да и неаккуратненько как-то. Поэтому я нанял на роль модератора ...свой `accesslog`. Как только с трекбека ко мне пришло два человека — комментарий открывается.

К сожалению, у этого способа есть две серьезные уязвимости. Основная — он работает только пока малораспространен (сейчас никто не станет переписывать роботов ради меня, а если такое будет внедрено повсеместно — робот после оставления трекбека будет по нему дважды кликать :-)). Но тут можно с таймаутами поиграться, можно на IP смотреть, можно в Referrer заглянуть... В общем, есть куда совершенствоваться.

Вторая шероховатость — если на меня оставляет trackback незнакомый широкой общественности блоггер, ко мне по ссылке может никто и не прийти. Но эту проблему я решил. Я вставил в название слово «snobbish».

Шучу, конечно. Я поанализировал статистику и понял, что с осмысленных трекбеков ко мне ходит минимум человек 10. Так что все ОК.