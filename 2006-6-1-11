Чудеса арифметики

Когда-то давно, когда ножей не знали, и говядину хуем рубили... Нет, пожалуй, все-таки позже. Одно могу сказать точно, 1С-Бухгалтерии — еще толком не было, и отсутствие локализованного околобухгалтерского программного обеспечения прокормило не одну сотню дуркующих программистов.

Я тоже не остался в стороне. В один прекрасный день я встретился с будущим заказчиком, услышал знакомый набор требований (чтобы все было круто, и мне все, бля, считало, нах) и поехал домой реализовывать.

Складской учет — штука тонкая. Тут вам и сальдо-мортале, и НДС на душу населения, и еще какие-то подводные камни, которые, надеюсь, безвозвратно,— стерлись из моей памяти. Одно я помню точно. В разделе напитки были бутылки, которые принимались на склад и фигурировали во всех расчетах ящиками, а цена была указана за бутылку, причем без НДС. Будучи по натуре человеком ленивым, я, разумеется, всю эту безумную сутолоку цифр разворачивал в отчетных документах, считая на лету, а оператору склада предоставлял вводить те данные, которыми он располагал — цену, повторюсь, за бутылку и количество ящиков. Я был очень горд своим новаторским решением, и до сих пор считаю появившиеся позже счетные поля в Дельфи — наглым плагиатом. Я поехал показывать программу заказчику.

Со скоростью, которой позавидовал бы Акопян, я открывал и закрывал окна, вводил данные, принимал товар и выписывал виртуальные накладные десятками. Вел себя как всякий неопытный программист при показе релиза заказчику. На сервере крутилась база, монитор удивленно мигал, от принтера можно было прикуривать. Все работало. Заказчик снисходительно улыбался, но я видел, что и его это мигание впечатлило. Я уехал домой, совершенно убежденный в собственной гениальности.

Через день заказчик мне позвонил. И сказал фразу, которая повергла меня в уныние и две недели напряженной работы. В результате я, фактически, был вынужден полностью переписать код. Он сказал:  
— Я, короче, не понял. А как итоговые суммы, где уже с НДС-ом, менять?